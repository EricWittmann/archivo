/*
 * Copyright 2015 Todd Kulesza <todd@dropline.net>.
 *
 * This file is part of Archivo.
 *
 * Archivo is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * Archivo is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Archivo.  If not, see <http://www.gnu.org/licenses/>.
 */

package net.dropline.archivo.tests;

import net.dropline.archivo.model.Tivo;
import org.json.JSONObject;
import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class TivoTest {
    @Test
    public void testEquality() {
        Tivo a = new Tivo.Builder().name("Foo").tsn("Bar").build();
        Tivo aCopy = new Tivo.Builder().name("Foo").tsn("Bar").build();
        Tivo b = new Tivo.Builder().name("Foo2").tsn("Bar2").build();

        assertEquals("a equals aCopy", true, a.equals(aCopy));
        assertEquals("a not equals b", false, a.equals(b));
        assertEquals("aCopy not equals b", false, aCopy.equals(b));
    }

    @Test
    public void testRecordingListParsing() {
        JSONObject json = new JSONObject("{\"type\": \"recordingFolderItemList\", \"recordingFolderItem\": [{\"bodyId\": \"tsn:7460011906CEC9B\", \"childRecordingId\": \"tivo:rc.1554509\", \"folderItemCount\": 2, \"folderType\": \"series\", \"levelOfDetail\": \"medium\", \"recordingFolderItemId\": \"tivo:rf.134814831\", \"startTime\": \"2015-07-24 00:59:59\", \"title\": \"The Rachel Maddow Show\", \"newItems\": 2, \"collectionId\": \"tivo:cl.134814831\", \"collectionType\": \"series\", \"transportType\": \"stream\", \"contentId\": \"tivo:ct.329368172\", \"type\": \"recordingFolderItem\", \"isAdult\": false},{\"bodyId\": \"tsn:7460011906CEC9B\", \"childRecordingId\": \"tivo:rc.1554639\", \"recordingFolderItemId\": \"tivo:rf.1554639\", \"startTime\": \"2015-07-24 00:00:00\", \"title\": \"All In With Chris Hayes\", \"newItems\": 1, \"recordingStatusType\": \"expired\", \"collectionId\": \"tivo:cl.261708770\", \"collectionType\": \"series\", \"transportType\": \"stream\", \"contentId\": \"tivo:ct.329368593\", \"subscriptionIdentifier\": [{\"subscriptionId\": \"tivo:sb.439109\", \"type\": \"subscriptionIdentifier\", \"subscriptionType\": \"seasonPass\"}], \"type\": \"recordingFolderItem\", \"isAdult\": false},{\"bodyId\": \"tsn:7460011906CEC9B\", \"childRecordingId\": \"tivo:rc.1553039\", \"folderItemCount\": 3, \"folderType\": \"series\", \"levelOfDetail\": \"medium\", \"recordingFolderItemId\": \"tivo:rf.61672390\", \"startTime\": \"2015-07-23 13:59:58\", \"title\": \"Anthony Bourdain: No Reservations\", \"newItems\": 0, \"collectionId\": \"tivo:cl.61672390\", \"collectionType\": \"series\", \"transportType\": \"stream\", \"contentId\": \"tivo:ct.218558226\", \"type\": \"recordingFolderItem\", \"isAdult\": false},{\"bodyId\": \"tsn:7460011906CEC9B\", \"childRecordingId\": \"tivo:rc.1553049\", \"recordingFolderItemId\": \"tivo:rf.1553049\", \"startTime\": \"2015-07-23 06:00:00\", \"title\": \"The Daily Show With Jon Stewart\", \"newItems\": 1, \"recordingStatusType\": \"expired\", \"collectionId\": \"tivo:cl.252203\", \"collectionType\": \"series\", \"transportType\": \"stream\", \"contentId\": \"tivo:ct.329805826\", \"subscriptionIdentifier\": [{\"subscriptionId\": \"tivo:sb.109\", \"type\": \"subscriptionIdentifier\", \"subscriptionType\": \"seasonPass\"}], \"type\": \"recordingFolderItem\", \"isAdult\": false},{\"bodyId\": \"tsn:7460011906CEC9B\", \"childRecordingId\": \"tivo:rc.1547809\", \"recordingFolderItemId\": \"tivo:rf.1547809\", \"startTime\": \"2015-07-20 05:00:00\", \"title\": \"Halt and Catch Fire\", \"newItems\": 1, \"collectionId\": \"tivo:cl.306093298\", \"collectionType\": \"series\", \"transportType\": \"stream\", \"contentId\": \"tivo:ct.331467785\", \"subscriptionIdentifier\": [{\"subscriptionId\": \"tivo:sb.782509\", \"type\": \"subscriptionIdentifier\", \"subscriptionType\": \"seasonPass\"}], \"type\": \"recordingFolderItem\", \"isAdult\": false},{\"bodyId\": \"tsn:7460011906CEC9B\", \"childRecordingId\": \"tivo:rc.1547779\", \"folderItemCount\": 4, \"folderType\": \"series\", \"levelOfDetail\": \"medium\", \"recordingFolderItemId\": \"tivo:rf.275528365\", \"startTime\": \"2015-07-20 02:59:58\", \"title\": \"Last Tango in Halifax\", \"newItems\": 0, \"collectionId\": \"tivo:cl.275528365\", \"collectionType\": \"series\", \"transportType\": \"stream\", \"contentId\": \"tivo:ct.331201338\", \"type\": \"recordingFolderItem\", \"isAdult\": false},{\"bodyId\": \"tsn:7460011906CEC9B\", \"childRecordingId\": \"tivo:rc.1547999\", \"recordingFolderItemId\": \"tivo:rf.1547999\", \"startTime\": \"2015-07-19 15:00:00\", \"title\": \"Meet the Press\", \"newItems\": 1, \"recordingStatusType\": \"expiresSoon\", \"collectionId\": \"tivo:cl.20056\", \"collectionType\": \"series\", \"transportType\": \"stream\", \"contentId\": \"tivo:ct.331293336\", \"subscriptionIdentifier\": [{\"subscriptionId\": \"tivo:sb.979929\", \"type\": \"subscriptionIdentifier\", \"subscriptionType\": \"seasonPass\"}], \"type\": \"recordingFolderItem\", \"isAdult\": false},{\"bodyId\": \"tsn:7460011906CEC9B\", \"childRecordingId\": \"tivo:rc.1547859\", \"recordingFolderItemId\": \"tivo:rf.1547859\", \"startTime\": \"2015-07-19 04:00:00\", \"title\": \"MythBusters\", \"newItems\": 1, \"collectionId\": \"tivo:cl.10670781\", \"collectionType\": \"series\", \"transportType\": \"stream\", \"contentId\": \"tivo:ct.332043891\", \"subscriptionIdentifier\": [{\"subscriptionId\": \"tivo:sb.26659\", \"type\": \"subscriptionIdentifier\", \"subscriptionType\": \"seasonPass\"}], \"type\": \"recordingFolderItem\", \"isAdult\": false},{\"bodyId\": \"tsn:7460011906CEC9B\", \"childRecordingId\": \"tivo:rc.1544749\", \"folderItemCount\": 10, \"folderType\": \"series\", \"levelOfDetail\": \"medium\", \"recordingFolderItemId\": \"tivo:rf.10327616\", \"startTime\": \"2015-07-18 20:29:58\", \"title\": \"America's Test Kitchen From Cook's Illustrated\", \"newItems\": 6, \"collectionId\": \"tivo:cl.10327616\", \"collectionType\": \"series\", \"transportType\": \"stream\", \"contentId\": \"tivo:ct.330049446\", \"type\": \"recordingFolderItem\", \"isAdult\": false},{\"bodyId\": \"tsn:7460011906CEC9B\", \"childRecordingId\": \"tivo:rc.1531969\", \"folderItemCount\": 5, \"folderType\": \"series\", \"levelOfDetail\": \"medium\", \"recordingFolderItemId\": \"tivo:rf.177883040\", \"startTime\": \"2015-07-11 20:59:59\", \"title\": \"Pati's Mexican Table\", \"newItems\": 5, \"collectionId\": \"tivo:cl.177883040\", \"collectionType\": \"series\", \"transportType\": \"stream\", \"contentId\": \"tivo:ct.330049640\", \"type\": \"recordingFolderItem\", \"isAdult\": false},{\"bodyId\": \"tsn:7460011906CEC9B\", \"childRecordingId\": \"tivo:rc.1478059\", \"folderItemCount\": 6, \"folderType\": \"series\", \"levelOfDetail\": \"medium\", \"recordingFolderItemId\": \"tivo:rf.161625498\", \"startTime\": \"2015-06-06 00:58:58\", \"title\": \"Adventure Time\", \"newItems\": 4, \"collectionId\": \"tivo:cl.161625498\", \"collectionType\": \"series\", \"transportType\": \"stream\", \"contentId\": \"tivo:ct.331549042\", \"type\": \"recordingFolderItem\", \"isAdult\": false},{\"bodyId\": \"tsn:7460011906CEC9B\", \"childRecordingId\": \"tivo:rc.1374619\", \"recordingFolderItemId\": \"tivo:rf.1374619\", \"startTime\": \"2015-04-22 03:00:00\", \"title\": \"Oregon Experience\", \"newItems\": 1, \"recordingStatusType\": \"expired\", \"collectionId\": \"tivo:cl.69799489\", \"collectionType\": \"series\", \"transportType\": \"stream\", \"contentId\": \"tivo:ct.329601765\", \"subscriptionIdentifier\": [{\"subscriptionId\": \"tivo:sb.34629\", \"type\": \"subscriptionIdentifier\", \"subscriptionType\": \"seasonPass\"}], \"type\": \"recordingFolderItem\", \"isAdult\": false},{\"bodyId\": \"tsn:7460011906CEC9B\", \"childRecordingId\": \"tivo:rc.1363669\", \"recordingFolderItemId\": \"tivo:rf.1363669\", \"startTime\": \"2015-04-16 04:00:00\", \"title\": \"NOVA\", \"newItems\": 1, \"recordingStatusType\": \"expired\", \"collectionId\": \"tivo:cl.17787\", \"collectionType\": \"series\", \"transportType\": \"stream\", \"contentId\": \"tivo:ct.328491365\", \"subscriptionIdentifier\": [{\"subscriptionId\": \"tivo:sb.26749\", \"type\": \"subscriptionIdentifier\", \"subscriptionType\": \"seasonPass\"}], \"type\": \"recordingFolderItem\", \"isAdult\": false},{\"bodyId\": \"tsn:7460011906CEC9B\", \"childRecordingId\": \"tivo:rc.1158279\", \"folderItemCount\": 9, \"folderType\": \"series\", \"levelOfDetail\": \"medium\", \"recordingFolderItemId\": \"tivo:rf.638072\", \"startTime\": \"2014-12-22 18:59:59\", \"title\": \"Good Eats\", \"newItems\": 0, \"collectionId\": \"tivo:cl.638072\", \"collectionType\": \"series\", \"transportType\": \"stream\", \"contentId\": \"tivo:ct.145296974\", \"type\": \"recordingFolderItem\", \"isAdult\": false},{\"bodyId\": \"tsn:7460011906CEC9B\", \"childRecordingId\": \"tivo:rc.1573359\", \"folderItemCount\": 60, \"folderType\": \"suggestion\", \"levelOfDetail\": \"medium\", \"recordingFolderItemId\": \"tivo:rf.0\", \"startTime\": \"2015-07-23 22:59:58\", \"title\": \"TiVo Suggestions\", \"newItems\": 12, \"collectionType\": \"series\", \"transportType\": \"stream\", \"contentId\": \"tivo:ct.329367949\", \"type\": \"recordingFolderItem\"}]}");
        String type = (String) json.get("type");

        assertEquals("type == recordingFolderItemList", "recordingFolderItemList", type);
    }
}